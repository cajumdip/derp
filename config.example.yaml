# Cojumpendium Scraper Configuration - Wayback Machine Focus
# Copy this file to config.yaml and customize

# General settings
general:
  # Directory to store downloaded media
  download_dir: "./downloads"
  
  # Directory to store cached HTML pages
  pages_dir: "./pages"
  
  # Database file location
  database: "./cojumpendium.db"
  
  # Logging level (DEBUG, INFO, WARNING, ERROR)
  log_level: "INFO"
  
  # Log file location
  log_file: "./scraper.log"

# Search configuration - REQUIRED phrases for Cojum Dip
search:
  phrases:
    - "Cojum Dip"
    - "cojumdip"
    - "bkaraca"
    - "Bora Karaca"
  
  # Date range for Wayback searches (2004-2012 era)
  date_range:
    start: "2004"
    end: "2012"

# Rate limiting configuration (CRITICAL for avoiding blocks)
rate_limiting:
  # Minimum delay between requests (seconds)
  min_delay: 5
  
  # Maximum delay between requests (seconds)
  max_delay: 15
  
  # Random variance to add (jitter in seconds)
  jitter: 3
  
  # Initial backoff on rate limit error (seconds)
  backoff_base: 30
  
  # Maximum backoff time (10 minutes)
  backoff_max: 600
  
  # Maximum requests per hour
  requests_per_hour: 100
  
  # Pause after this many requests
  cooldown_every: 50
  
  # Cooldown pause duration (seconds, 3 minutes)
  cooldown_duration: 180

# User agent rotation
user_agents:
  - "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
  - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Safari/605.1.15"
  - "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:121.0) Gecko/20100101 Firefox/121.0"
  - "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"

# Storage settings
storage:
  database: "./cojumpendium.db"
  downloads: "./downloads"
  pages: "./pages"

# Logging configuration
logging:
  level: "INFO"
  file: "./scraper.log"

# Wayback search methods
wayback:
  # Enable/disable specific search methods
  methods:
    cdx: true           # CDX Server API
    calendar: true      # Calendar Captures API
    fulltext: true      # Full-text search results scraping
    archive_search: true # Archive.org general search
  
  # CDX Server configuration
  cdx:
    url: "https://web.archive.org/cdx/search/cdx"
    match_type: "domain"
  
  # Calendar API configuration
  calendar:
    url: "https://web.archive.org/__wb/calendarcaptures/2"
    # Known sites to check for calendar captures
    sites:
      - "http://myspace.com/cojumdip"
      - "http://purevolume.com/cojumdip"
      - "http://soundcloud.com/cojumdip"
  
  # Full-text search configuration
  fulltext:
    base_url: "https://web.archive.org/web/*/"
    max_pages: 50  # Maximum result pages to scrape per phrase
  
  # Archive.org search configuration
  archive_search:
    url: "https://archive.org/advancedsearch.php"
    fields: ["identifier", "title", "description", "creator", "date"]
    rows: 100  # Results per page

# Content analysis settings
content_analysis:
  # Extract content from pages
  enabled: true
  
  # Search for phrases in page content
  search_phrases: true
  
  # Extract media from pages
  extract_media: true

# Media extraction settings
media:
  # File types to download
  images:
    enabled: true
    extensions: [".jpg", ".jpeg", ".png", ".gif", ".bmp", ".webp"]
    max_size_mb: 50
  
  videos:
    enabled: true
    extensions: [".mp4", ".avi", ".flv", ".wmv", ".mov", ".webm"]
    max_size_mb: 500
  
  audio:
    enabled: true
    extensions: [".mp3", ".wav", ".ogg", ".flac", ".m4a", ".wma"]
    max_size_mb: 100

# Export settings
export:
  # Output directory for exports
  output_dir: "./exports"
  
  # Generate JSON export
  json: true
  
  # Generate CSV export
  csv: true
  
  # Generate HTML report
  html: true
